{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title_block %}
	{{ blog_title }}
{% endblock %}

{% block body_block %}
	<div class="row">
		<div class="col-sm-6">
			<h2>{{ blog.blog_title }}</h2>
			<h4>Posted By: @{{ blog.author }}</h4>
			<h6><i>Published On: {{ blog.publish_date }}</i></h6>
			<h6><i>Updated On: {{ blog.update_date }}</i></h6>
			<h6>
				<i class="fa-regular fa-thumbs-up" style="color: #3FB7B9;"></i>
				{{ blog.blog_likes.count }}
				<i class="fa-regular fa-message" style="color: #3FB7B9;"></i>
				{{ blog.blog_comment.count }}
			</h6>
		</div>
		<div class="col-sm-6">
			<img src="/media/{{ blog.blog_image }}" alt="{{ blog.blog_title }}" title="{{ blog.blog_title }}" width="100%" height="300px">
		</div>
	</div>
	<br>
	<div class="row">
		<p class="text-justify">{{ blog.blog_content|linebreaksbr }}</p>
	</div>

	{% if liked %}
	<a href="{% url 'App_Blog:unliked_blog' pk=blog.pk %}" class="nav-link">
		<i class="fa-regular fa-thumbs-down fa-flip-horizontal fa-2x" style="color: #3FB7B9;"></i>
	</a>
	{% else %}
	<a href="{% url 'App_Blog:liked_blog' pk=blog.pk %}">
		<i class="fa-regular fa-thumbs-up fa-2x" style="color: #3FB7B9;"></i>
	</a>
	{% endif %}

	<h6>{{ blog.blog_likes.count }} Likes | {{ blog.blog_comment.count }} Comments</h6>
	
	<br>
	<hr>
	<div class="row">
		<h3>Comments</h3>
		<div class="col-sm-8">
			<form method="POST">
				{{ comment_form|crispy }}
				{% csrf_token %}
				<button type="submit" class="btn btn-primary btn-sm">Comment</button>
			</form>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-sm-8">
			{% for comment in blog.blog_comment.all %}
				<a href="#" class="nav-link text-primary">
					{% if comment.user.user_profile %}
						<img src="/media/{{ comment.user.user_profile.profile_pic }}" width="30px" height="30px" class="border rounded">
					{% else %}
						<img src="/media/profile_pics/human.jpg" width="30px" height="30px" class="border rounded">
					{% endif %}
					@{{ comment.user }}
					<span class="text-black">
						<i> â€¢ {{ comment.comment_date }} </i>
					</span>
				</a>
				<p class="text-justify">
					{{ comment.comment }}
					<br>
					<i class="fa-regular fa-thumbs-up" style="color: #B197FC;"></i>
					<i class="fa-regular fa-thumbs-down fa-flip-horizontal" style="color: #B197FC;"></i>
				</p>
			{% endfor %}
		</div>
	</div>
	<br>
	<br>
{% endblock %}